<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Đang Chuyển Hướng An Toàn... | MDVH18</title>
    <style>
        body { background: #0f0c29; color: white; font-family: 'Segoe UI', sans-serif; display: flex; align-items: center; justify-content: center; height: 100vh; margin: 0; }
        .box { text-align: center; background: rgba(255, 255, 255, 0.05); padding: 40px; border-radius: 20px; backdrop-filter: blur(15px); border: 1px solid rgba(255,255,255,0.1); box-shadow: 0 0 30px rgba(215, 155, 187, 0.2); max-width: 400px; }
        .loader { border: 4px solid rgba(255,255,255,0.1); border-top: 4px solid #f78f90; border-radius: 50%; width: 50px; height: 50px; animation: spin 1s linear infinite; margin: 0 auto 20px; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        #timer { font-size: 3em; color: #d79bbb; font-weight: bold; margin: 10px 0; }
        .btn-manual { display: none; background: #f78f90; color: white; text-decoration: none; padding: 10px 20px; border-radius: 30px; font-weight: bold; margin-top: 20px; }
    </style>
</head>
<body>
    <div class="box">
        <div class="loader"></div>
        <h3>HỆ THỐNG ĐANG KIỂM TRA</h3>
        <p>Vui lòng chờ trong giây lát để lấy liên kết tải game an toàn.</p>
        <div id="timer">3</div>
        <a id="manual-link" class="btn-manual" href="#">NHẤN VÀO ĐÂY NẾU KHÔNG TỰ CHUYỂN</a>
    </div>

    <script>
        // Hàm giải mã link
        function getLink() {
            const urlParams = new URLSearchParams(window.location.search);
            const encoded = urlParams.get('url');
            if (encoded) {
                try {
                    return atob(encoded); // Giải mã Base64
                } catch (e) {
                    return null;
                }
            }
            return null;
        }

        const targetUrl = getLink();
        let timeLeft = 3;
        const timerEl = document.getElementById('timer');
        const manualBtn = document.getElementById('manual-link');

        if (targetUrl) {
            const countdown = setInterval(() => {
                timeLeft--;
                timerEl.innerText = timeLeft;
                if (timeLeft <= 0) {
                    clearInterval(countdown);
                    window.location.href = targetUrl; // Tự động chuyển hướng
                    manualBtn.style.display = 'inline-block';
                    manualBtn.href = targetUrl;
                }
            }, 1000);
        } else {
            document.querySelector('.box').innerHTML = "<h3>LỖI ĐƯỜNG DẪN</h3><p>Link không hợp lệ hoặc đã hết hạn.</p>";
        }
    </script>
</body>
</html>
